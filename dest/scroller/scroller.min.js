!function(a){function b(a,b){this.box=a,this.container=null,this.scrollBox=null,this.contentBox=null,this.config={backgroundColor:b&&b.backgroundColor||"#c2c2c2",railColor:b&&b.railColor||"lightslategray",draggerColor:b&&b.draggerColor||"#ffff00",barWidth:b&&b.barWidth||5,delta:b&&b.delta||50,barSpace:b&&b.barSpace||5,animate:b&&b.animate||!0,animateTime:b&&b.animateTime||300,mouseWheelDirection:b&&b.mouseWheelDirection||"horizontal",contentSpace:b&&b.contentSpace||5},this.scrollBarY={bar:null,dragger:null,ratio:0,contentTop:0,draggerTop:0,prevOffsetTop:0,display:!1},this.scrollBarYRailScratch=null,this.scrollBarYDraggerScratch=null,this.scrollBarXRailScratch=null,this.scrollBarXDraggerScratch=null,this.scrollBarX={bar:null,dragger:null,ratio:0,contentLeft:0,draggerLeft:0,prevOffsetLeft:0,display:!1},this.clickBarOrigin=null,this.boxPrevWidth=this.box.width(),this.boxPrevHeight=this.box.height(),this.initialize()}b.prototype.initialize=function(){return this.originContent=this.box.children().clone(!0,!0),this.boxPrevWidth=this.box.width(),this.boxPrevHeight=this.box.height(),this.box[0].scrollerObj=this,this.createBox()&&this.createBar(!0,"X").createBar(!0,"Y").eventRegister(),this},b.browserName=function(){var a=navigator.userAgent,b="";return-1!=a.indexOf("Chrome")?b="Chrome":-1!=a.indexOf("Firefox")?b="Firefox":(-1!=a.indexOf("MSIE")||-1!=a.indexOf("rv:11.0"))&&(b="IE"),b}(),b.mousewheel="Firefox"==b.browserName?"DOMMouseScroll":"mousewheel",b.prototype.createBox=function(){return this.container=a("<div class='lorin-scroll-container'></div>"),this.scrollBox=a("<div class='lorin-scroll-box'></div>"),this.contentBox=a("<div class='lorin-content'></div>"),this.contentBox.append(this.box.children().clone(!0,!0)),this.box.empty(),this.scrollBox.append(this.contentBox),this.container.append(this.scrollBox),this.box.append(this.container),this.contentBox.height()<=this.box.height()&&this.contentBox.width()<=this.box.width()?(this.box.empty().append(this.contentBox.html()),this.container=null,this.scrollBox=null,this.contentBox=null,!1):(this.container.css({height:this.box.height()-2*this.config.barSpace-this.config.barWidth-this.config.contentSpace,padding:this.config.barSpace,paddingBottom:this.config.barSpace+this.config.barWidth+this.config.contentSpace,paddingRight:this.config.contentSpace,position:"relative",backgroundColor:this.config.backgroundColor}),this.scrollBox.css({height:"100%",position:"relative",overflow:"hidden"}),this.contentBox.css({position:"absolute",top:0,left:0}),this.contentBox.height()<=this.scrollBox.height()&&(this.container.css({paddingRight:this.config.barSpace}),this.config.mouseWheelDirection="horizontal"),this.contentBox.width()<=this.scrollBox.width()&&(this.container.css({paddingBottom:this.config.barSpace}),this.config.mouseWheelDirection="vertical"),this)},b.prototype.createBar=function(b,c){var d=this.config,e=this;if(!this.container)return this;if(b&&(this["scrollBar"+c].bar=a("<div class='lorin-bar'></div>"),this["scrollBar"+c].dragger=a("<div class='lorin-dragger'></div>"),this["scrollBar"+c].bar.css("display","none")),this["scrollBar"+c].bar&&this["scrollBar"+c].bar.css({position:"absolute",borderRadius:d.barWidth,backgroundColor:d.railColor}),this["scrollBar"+c].dragger&&this["scrollBar"+c].dragger.css({position:"absolute",top:0,left:0,backgroundColor:d.draggerColor,borderRadius:d.barWidth}),"Y"==c){if(this.contentBox.height()<=this.scrollBox.height())return this["scrollBar"+c].bar&&this["scrollBar"+c].bar.remove(),this["scrollBar"+c]={},this;this["scrollBar"+c].bar||(this.createBar(!0,c),this["scrollBar"+c].dragger.on("mouseover",function(){e["scrollBar"+c].dragger.css("cursor","pointer")}),this["scrollBar"+c].dragger.on("mousedown",{type:"scrollBar"+c,scope:this},this.draggerMouseDownFun),this["scrollBar"+c].bar.on("click",{type:"scrollBar"+c,scope:this},this.scrollClickFun)),this["scrollBar"+c].bar.css({top:d.barSpace,right:d.barSpace,width:d.barWidth,height:this.scrollBox.height()}),this["scrollBar"+c].dragger.css({width:d.barWidth,height:Math.pow(this.scrollBox.height(),2)/this.contentBox.height(),zIndex:3}),this.scrollBarY.ratio=(this.contentBox.height()-this.scrollBox.height())/(this.scrollBox.height()-this.scrollBarY.dragger.height())}else if("X"==c){if(this.contentBox.width()<=this.scrollBox.width())return this["scrollBar"+c].bar&&this["scrollBar"+c].bar.remove(),this["scrollBar"+c]={},this;this["scrollBar"+c].bar||(this.createBar(!0,c),this["scrollBar"+c].dragger.on("mouseover",function(){e["scrollBar"+c].dragger.css("cursor","pointer")}),this["scrollBar"+c].dragger.on("mousedown",{type:"scrollBar"+c,scope:this},this.draggerMouseDownFun),this["scrollBar"+c].bar.on("click",{type:"scrollBar"+c,scope:this},this.scrollClickFun)),this["scrollBar"+c].bar.css({bottom:d.barSpace,left:d.barSpace,width:this.scrollBox.width(),height:d.barWidth}),this["scrollBar"+c].dragger.css({width:Math.pow(this.scrollBox.width(),2)/this.contentBox.width(),height:d.barWidth}),this.scrollBarX.ratio=(this.contentBox.width()-this.scrollBox.width())/(this.scrollBox.width()-this.scrollBarX.dragger.width())}return b&&(this["scrollBar"+c].bar.append(this["scrollBar"+c].dragger),this.container.append(this["scrollBar"+c].bar)),this},b.prototype.eventRegister=function(){var c=this;return this.container?(this.container.on("mouseenter",function(){c.scrollBarX.bar&&c.scrollBarX.bar.fadeIn(300,"linear"),c.scrollBarY.bar&&c.scrollBarY.bar.fadeIn(300,"linear")}),this.container.on("mouseleave",function(){c.scrollBarX.bar&&!c.scrollBarX.display&&c.scrollBarX.bar.fadeOut(200,"linear"),c.scrollBarY.bar&&!c.scrollBarY.display&&c.scrollBarY.bar.fadeOut(200,"linear")}),this.scrollBarX.bar&&(this.scrollBarX.dragger.on("mouseover",function(){c.scrollBarX.dragger.css("cursor","pointer")}),this.scrollBarX.dragger.on("mousedown",{type:"scrollBarX",scope:this},this.draggerMouseDownFun),this.scrollBarX.bar.on("click",{type:"scrollBarX",scope:this},this.scrollClickFun)),this.scrollBarY.bar&&(this.scrollBarY.dragger.on("mouseover",function(){c.scrollBarY.dragger.css("cursor","pointer")}),this.scrollBarY.dragger.on("mousedown",{type:"scrollBarY",scope:this},this.draggerMouseDownFun),this.scrollBarY.bar.on("click",{type:"scrollBarY",scope:this},this.scrollClickFun)),a(document).on("mouseup",function(b){var d=b.target,e=c.box.find(d);a(document).off("mousemove",c.documentMouseMoveFun),c.scrollBarY.display=!1,c.scrollBarX.display=!1,c.scrollBarX.bar&&!e.length&&c.scrollBarX.bar.fadeOut(200,"linear"),c.scrollBarY.bar&&!e.length&&c.scrollBarY.bar.fadeOut(200,"linear"),c.allowUserSelect()}),this.scrollBox.on(b.mousewheel,{scope:this},this.mouseWheelFun),this):this},b.prototype.draggerMouseDownFun=function(b){var c=b.data.scope,d=b.data.type;c.forbidUserSelect(),c.clickBarOrigin=a(b.target),"scrollBarY"==d?(c.scrollBarY.prevOffsetTop=b.clientY,c.scrollBarY.display=!0):"scrollBarX"==d&&(c.scrollBarX.prevOffsetLeft=b.clientX,c.scrollBarX.display=!0),a(document).on("mousemove",{scope:c,type:d},c.documentMouseMoveFun)},b.prototype.documentMouseMoveFun=function(a){var b=a.data.scope,c="";if("scrollBarY"==a.data.type){var d=b.scrollBarY.prevOffsetTop,e=a.clientY;c=e-d>0?"down":"up",b.scrollBarY.draggerTop+=e-d,b.scrollBarY.contentTop=-b.scrollBarY.draggerTop*b.scrollBarY.ratio,b.scrollBarY.prevOffsetTop=e,b.updatePosition(c,!0)}else if("scrollBarX"==a.data.type){var f=b.scrollBarX.prevOffsetLeft,g=a.clientX;c=g-f>0?"right":"left",b.scrollBarX.draggerLeft+=g-f,b.scrollBarX.contentLeft=-b.scrollBarX.draggerLeft*b.scrollBarX.ratio,b.scrollBarX.prevOffsetLeft=g,b.updatePosition(c,!0)}},b.prototype.scrollClickFun=function(b){var c=b.target,d=b.data.type,e=b.data.scope,f="";return e.clickBarOrigin?(e.clickBarOrigin=null,!1):a(c).is(".lorin-dragger")?!1:void("scrollBarY"==d?(f=b.offsetY>e.scrollBarY.draggerTop?"down":"up",e.scrollBarY.draggerTop=b.offsetY,e.scrollBarY.contentTop=-b.offsetY*e.scrollBarY.ratio,e.updatePosition(f)):"scrollBarX"==d&&(f=b.offsetX>e.scrollBarX.draggerLeft?"right":"left",e.scrollBarX.draggerLeft=b.offsetX,e.scrollBarX.contentLeft=-b.offsetX*e.scrollBarX.ratio,b.data.scope.updatePosition(f)))},b.prototype.mouseWheelFun=function(a){var b=a.originalEvent,c="",d=a.data.scope,e=d.config.mouseWheelDirection;if(b.wheelDelta?(b.wheelDelta>0&&(c="vertical"==e?"up":"right"),b.wheelDelta<0&&(c="vertical"==e?"down":"left")):b.detail&&(b.detail>0&&(c="vertical"==e?"down":"left"),b.detail<0&&(c="vertical"==e?"up":"right")),"vertical"==e){var f="up"==c?d.config.delta:-d.config.delta;d.scrollBarY.contentTop+=f*d.scrollBarY.ratio,d.scrollBarY.draggerTop-=f}else if("horizontal"==e){var g="left"==c?d.config.delta:-d.config.delta;d.scrollBarX.contentLeft+=g*d.scrollBarX.ratio,d.scrollBarX.draggerLeft-=g}"up"==c?d.updatePosition("up"):"down"==c?d.updatePosition("down"):"left"==c?d.updatePosition("left"):"right"==c&&d.updatePosition("right"),"right"==c&&d.scrollBarX.dragger&&d.scrollBarX.bar&&parseInt(d.scrollBarX.dragger.css("left"))>=d.scrollBarX.bar.width()-d.scrollBarX.dragger.width()||"left"==c&&d.scrollBarX.dragger&&d.scrollBarX.bar&&parseInt(d.scrollBarX.dragger.css("left"))<=0||"up"==c&&d.scrollBarY.dragger&&d.scrollBarY.bar&&parseInt(d.scrollBarY.dragger.css("top"))<=0||"down"==c&&d.scrollBarY.dragger&&d.scrollBarY.bar&&parseInt(d.scrollBarY.dragger.css("top"))>=d.scrollBarY.bar.height()-d.scrollBarY.dragger.height()||a.preventDefault()},b.prototype.updatePosition=function(a,b){var c=this,d=arguments[0];if("object"==typeof d&&(a=d.direction,"right"==a&&(c.scrollBarX.draggerLeft=d.location,c.scrollBarX.contentLeft=-c.scrollBarX.draggerLeft*c.scrollBarX.ratio),"up"==a&&(c.scrollBarY.draggerTop=d.location,c.scrollBarY.contentTop=-c.scrollBarY.draggerTop*c.scrollBarY.ratio)),"up"==a||"down"==a){if(!c.scrollBarY.bar)return!1;if(c.scrollBarY.contentTop>0?(c.scrollBarY.contentTop=0,c.scrollBarY.draggerTop=0):Math.abs(c.scrollBarY.draggerTop)>c.scrollBarY.bar.height()-c.scrollBarY.dragger.height()&&(c.scrollBarY.contentTop=c.scrollBox.height()-c.contentBox.height(),c.scrollBarY.draggerTop=c.scrollBarY.bar.height()-c.scrollBarY.dragger.height()+1),!c.config.animate)return c.contentBox.css("top",c.scrollBarY.contentTop),c.scrollBarY.dragger.css("top",c.scrollBarY.draggerTop),!1;c.contentBox.is(":animated")&&(c.contentBox.stop(!0,!1),c.scrollBarY.dragger.stop(!0,!1)),"object"==typeof d?(c.contentBox.css({top:c.scrollBarY.contentTop}),c.scrollBarY.dragger.css({top:c.scrollBarY.draggerTop})):(c.contentBox.animate({top:c.scrollBarY.contentTop},c.config.animateTime,"swing"),b?c.scrollBarY.dragger.css("top",c.scrollBarY.draggerTop):c.scrollBarY.dragger.animate({top:c.scrollBarY.draggerTop},c.config.animateTime,"swing"))}else if("left"==a||"right"==a){if(!c.scrollBarX.bar)return!1;if(c.scrollBarX.draggerLeft<0?(c.scrollBarX.contentLeft=0,c.scrollBarX.draggerLeft=0):Math.abs(c.scrollBarX.draggerLeft)>c.scrollBarX.bar.width()-c.scrollBarX.dragger.width()&&(c.scrollBarX.contentLeft=c.scrollBox.width()-c.contentBox.width(),c.scrollBarX.draggerLeft=c.scrollBarX.bar.width()-c.scrollBarX.dragger.width()+1),!c.config.animate)return c.contentBox.css("left",c.scrollBarX.contentLeft),c.scrollBarX.dragger.css("left",c.scrollBarX.draggerLeft),!1;c.contentBox.is(":animated")&&(c.contentBox.stop(!0,!1),c.scrollBarX.dragger.stop(!0,!1)),"object"==typeof d?(c.contentBox.css({left:c.scrollBarX.contentLeft}),c.scrollBarX.dragger.css({left:c.scrollBarX.draggerLeft})):(c.contentBox.animate({left:c.scrollBarX.contentLeft},c.config.animateTime,"swing"),b?c.scrollBarX.dragger.css("left",c.scrollBarX.draggerLeft):c.scrollBarX.dragger.animate({left:c.scrollBarX.draggerLeft},c.config.animateTime,"swing"))}},b.prototype.allowUserSelect=function(){var c=b.browserName;"Firefox"==c?a("html").css("-moz-user-select","-moz-all"):a(document).off("selectstart")},b.prototype.forbidUserSelect=function(){var c=b.browserName;"Firefox"==c?a("html").css("-moz-user-select","none"):a(document).on("selectstart",function(){return!1})},b.prototype.update=function(a){this.container||(this.box[0].scrollerObj=new b(this.box)),this.config={backgroundColor:a&&a.backgroundColor||this.config.backgroundColor,railColor:a&&a.railColor||this.config.railColor,draggerColor:a&&a.draggerColor||this.config.draggerColor,barWidth:a&&a.barWidth||this.config.barWidth,delta:a&&a.delta||this.config.delta,barSpace:a&&a.barSpace||this.config.barSpace,animate:a&&a.animate||!0,animateTime:a&&a.animateTime||this.config.animateTime,mouseWheelDirection:a&&a.mouseWheelDirection||this.config.mouseWheelDirection,contentSpace:a&&a.contentSpace||this.config.contentSpace};var c=this.scrollBarY.draggerTop,d=this.scrollBarX.draggerLeft;return this.setStyle(),this.updatePosition({direction:"right",location:d}),this.updatePosition({direction:"up",location:c}),this},b.prototype.setStyle=function(){this.config;return this.container.css({height:this.box.height()-3*this.config.barSpace-this.config.barWidth,padding:this.config.barSpace,paddingBottom:2*this.config.barSpace+this.config.barWidth,paddingRight:this.config.contentSpace,backgroundColor:this.config.backgroundColor}),this.contentBox.height()<=this.scrollBox.height()&&this.container.css({paddingRight:this.config.barSpace}),this.contentBox.width()<=this.scrollBox.width()&&this.container.css({height:this.box.height()-2*this.config.barSpace,paddingBottom:this.config.barSpace}),this.createBar(!1,"X").createBar(!1,"Y"),this},b.prototype.destroy=function(c,d){return this.container?(this.box.empty(),this.box.append(this.originContent),this.container.off("mouseenter"),this.container.off("mouseleave"),this.scrollBarX.bar&&(this.scrollBarX.dragger.off("mouseover"),this.scrollBarX.dragger.off("mousedown"),this.scrollBarX.bar.off("click")),this.scrollBarY.bar&&(this.scrollBarY.dragger.off("mouseover"),this.scrollBarY.dragger.off("mousedown"),this.scrollBarY.bar.off("click")),a(document).off("mouseup"),this.scrollBox.off(b.mousewheel),this.scrollBarY={bar:null,dragger:null,ratio:0,contentTop:0,draggerTop:0,prevOffsetTop:0,display:!1},this.scrollBarX={bar:null,dragger:null,ratio:0,contentLeft:0,draggerLeft:0,prevOffsetLeft:0,display:!1},this.clickBarOrigin=null,this.container=null,this.scrollBox=null,this.contentBox=null,delete d.scrollerObj,this):this},b.prototype.autoUpdate=function(){var a=this,b=this.box.width(),c=this.box.height(),d=this.contentBox.width(),e=this.contentBox.height();this.autoUpdateTimer=setInterval(function(){(b!=a.box.width()||c!=a.box.height()||d!=a.contentBox.width()||e!=a.contentBox.height())&&(a.originContent=a.contentBox.children().clone(!0,!0),a.setStyle()),b=a.box.width(),c=a.box.height(),d=a.contentBox.width(),e=a.contentBox.height()},60)},b.prototype.cancelAutoUpdate=function(){clearInterval(this.autoUpdateTimer)},a.fn.extend({lorinScroller:function(){0!==arguments.length||this[0].scrollerObj||(this.addClass("lorin-scroll"),this[0].scrollerObj=new b(this,arguments[0])),"update"==arguments[0]||"destroy"==arguments[0]?this[0].scrollerObj&&this[0].scrollerObj[arguments[0]](arguments[1],this[0]):this[0].scrollerObj||(this.addClass("lorin-scroll"),this[0].scrollerObj=new b(this,arguments[0]))}}),a(function(){a(".lorin-scroll").each(function(b,c){a(c).lorinScroller({})})}),window.onresize=function(){a(".lorin-scroll").each(function(b,c){a(c).lorinScroller("update",{})})}}(jQuery);