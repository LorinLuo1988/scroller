!function(a){function b(a,b){this.box=a,this.scrollBox=null,this.contentBox=null,this.config={backgroundColor:b&&b.backgroundColor||"#555555",railColor:b&&b.railColor||"#333333",draggerColor:b&&b.draggerColor||"#dadada",barWidth:b&&b.barWidth||5,delta:b&&b.delta||50},this.scrollBarY={bar:null,dragger:null,ratio:0,contentTop:0,draggerTop:0,prevOffsetTop:0,display:!1},this.scrollBarX={bar:null,dragger:null,ratio:0,contentLeft:0,draggerLeft:0,prevOffsetLeft:0,display:!1},this.ratioX=0,this.clickBarOrigin=null,this.initialize()}b.prototype.initialize=function(){return this.createBox().crateBarX().crateBarY().eventRegister(),this},b.browserName=function(){var a=navigator.userAgent,b="";return-1!=a.indexOf("Chrome")?b="Chrome":-1!=a.indexOf("Firefox")?b="Firefox":(-1!=a.indexOf("MSIE")||-1!=a.indexOf("rv:11.0"))&&(b="IE"),b}(),b.mousewheel="Firefox"==b.browserName?"DOMMouseScroll":"mousewheel",b.prototype.toggleWindowScrollEvent=function(a){var b=window.scrollY||document.documentElement.scrollTop,c=window.scrollX||document.documentElement.scrollLeft;return a?window.onscroll=function(){window.scrollTo(c,b)}:window.onscroll=null,this},b.prototype.createBox=function(){return this.scrollBox=a("<div class='lorin-scroll-box'></div>"),this.contentBox=a("<div class='lorin-container'></div>"),this.scrollBox.css({width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:this.backgroundColor}),this.contentBox.css({position:"absolute",top:0}),this.contentBox.html(this.box.html()),this.box.empty(),this.scrollBox.append(this.contentBox),this.box.append(this.scrollBox),this},b.prototype.crateBarY=function(){var b=this.config;return this.contentBox.height()<=this.scrollBox.height()?this:(this.scrollBarY.bar=a("<div class='lorin-bar'></div>"),this.scrollBarY.dragger=a("<div class='lorin-dragger'></div>"),this.scrollBarY.bar.css({position:"absolute",top:0,right:0,width:b.barWidth,padding:"0 1px",height:"100%",borderRadius:b.barWidth,backgroundColor:b.railColor,display:"none"}),this.scrollBarY.dragger.css({position:"absolute",top:0,left:0,width:b.barWidth,borderRight:"1px solid "+b.railColor,borderLeft:"1px solid "+b.railColor,backgroundColor:b.draggerColor,borderRadius:b.barWidth,zIndex:3,height:Math.pow(this.scrollBox.height(),2)/this.contentBox.height()}),this.scrollBarY.bar.append(this.scrollBarY.dragger),this.scrollBox.append(this.scrollBarY.bar),this.scrollBarY.ratio=(this.contentBox.height()-this.scrollBox.height())/(this.scrollBox.height()-this.scrollBarY.dragger.height()),this.scrollBarY.StepCount=Math.ceil((this.scrollBox.height()-this.scrollBarY.dragger.height())/this.config.delta),this)},b.prototype.crateBarX=function(){var b=this.config;return this.contentBox.width()<=this.scrollBox.width()?this:(this.scrollBarX.bar=a("<div class='lorin-bar'></div>"),this.scrollBarX.dragger=a("<div class='lorin-dragger'></div>"),this.scrollBarX.bar.css({position:"absolute",bottom:0,left:0,width:"100%",height:b.barWidth,padding:"1px 0",borderRadius:b.barWidth,backgroundColor:b.railColor,display:"none"}),this.scrollBarX.dragger.css({position:"absolute",left:0,top:0,height:b.barWidth,backgroundColor:b.draggerColor,borderTop:"1px solid "+b.railColor,borderBottom:"1px solid "+b.railColor,borderRadius:b.barWidth,zIndex:3,width:Math.pow(this.scrollBox.width(),2)/this.contentBox.width()}),this.scrollBox.append(this.scrollBarX.bar),this.scrollBarX.bar.append(this.scrollBarX.dragger),this.scrollBarX.ratio=(this.contentBox.width()-this.scrollBox.width())/(this.scrollBox.width()-this.scrollBarX.dragger.width()),this.scrollBarY.StepCount=Math.ceil((this.scrollBox.width()-this.scrollBarX.dragger.width())/this.config.delta),this)},b.prototype.eventRegister=function(){var c=this;this.scrollBox.on("mouseenter",function(){c.scrollBarX.bar&&c.scrollBarX.bar.fadeIn(300,"linear"),c.scrollBarY.bar&&c.scrollBarY.bar.fadeIn(300,"linear")}),this.scrollBox.on("mouseleave",function(){c.scrollBarX.bar&&!c.scrollBarX.display&&c.scrollBarX.bar.fadeOut(200,"linear"),c.scrollBarY.bar&&!c.scrollBarY.display&&c.scrollBarY.bar.fadeOut(200,"linear"),c.toggleWindowScrollEvent(!1)}),this.scrollBarX.bar&&(this.scrollBarX.dragger.on("mouseover",function(){c.scrollBarX.dragger.css("cursor","pointer")}),this.scrollBarX.dragger.on("mousedown",{type:"scrollBarX",scope:this},this.draggerMouseDownFun),this.scrollBarX.bar.on("click",{type:"scrollBarX",scope:this},this.scrollClickFun)),this.scrollBarY.bar&&(this.scrollBarY.dragger.on("mouseover",function(){c.scrollBarY.dragger.css("cursor","pointer")}),this.scrollBarY.dragger.on("mousedown",{type:"scrollBarY",scope:this},this.draggerMouseDownFun),this.scrollBarY.bar.on("click",{type:"scrollBarY",scope:this},this.scrollClickFun)),a(document).on("mouseup",function(b){var d=b.target,e=c.box.find(d);a(document).off("mousemove",c.documentMouseMoveFun),c.scrollBarY.display=!1,c.scrollBarX.display=!1,c.scrollBarX.bar&&!e.length&&c.scrollBarX.bar.fadeOut(200,"linear"),c.scrollBarY.bar&&!e.length&&c.scrollBarY.bar.fadeOut(200,"linear"),c.allowUserSelect()}),this.scrollBox.on(b.mousewheel,{scope:this},this.mouseWheelFun)},b.prototype.draggerMouseDownFun=function(b){var c=b.data.scope,d=b.data.type;c.forbidUserSelect(),c.clickBarOrigin=a(b.target),"scrollBarY"==d?(c.scrollBarY.prevOffsetTop=b.clientY,c.scrollBarY.display=!0):"scrollBarX"==d&&(c.scrollBarX.prevOffsetLeft=b.clientX,c.scrollBarX.display=!0),a(document).on("mousemove",{scope:c,type:d},c.documentMouseMoveFun)},b.prototype.documentMouseMoveFun=function(a){var b=a.data.scope;if("scrollBarY"==a.data.type){var c=b.scrollBarY.prevOffsetTop,d=a.clientY,e=d-c>0?"down":"up";b.scrollBarY.draggerTop+=d-c,b.scrollBarY.contentTop=-b.scrollBarY.draggerTop*b.scrollBarY.ratio,b.scrollBarY.prevOffsetTop=d,b.updatePosition(e,!0)}else if("scrollBarX"==a.data.type){var f=b.scrollBarX.prevOffsetLeft,g=a.clientX,e=g-f>0?"right":"left";b.scrollBarX.draggerLeft+=g-f,b.scrollBarX.contentLeft=-b.scrollBarX.draggerLeft*b.scrollBarX.ratio,b.scrollBarX.prevOffsetLeft=g,b.updatePosition(e,!0)}},b.prototype.scrollClickFun=function(b){var c=b.target,d=b.data.type,e=b.data.scope,f="";return e.clickBarOrigin?(e.clickBarOrigin=null,!1):a(c).is(".lorin-dragger")?!1:void("scrollBarY"==d?(f=b.offsetY>e.scrollBarY.draggerTop?"down":"up",e.scrollBarY.draggerTop=b.offsetY,e.scrollBarY.contentTop=-b.offsetY*e.scrollBarY.ratio,e.updatePosition(f)):"scrollBarX"==d&&(f=b.offsetX>e.scrollBarX.draggerLeft?"right":"left",e.scrollBarX.draggerLeft=b.offsetX,e.scrollBarX.contentLeft=-b.offsetX*e.scrollBarX.ratio,b.data.scope.updatePosition(f)))},b.prototype.mouseWheelFun=function(a){var b=a.originalEvent,c="",d=a.data.scope,e=0;b.wheelDelta?(b.wheelDelta>0&&(c="up"),b.wheelDelta<0&&(c="down")):b.detail&&(b.detail>0&&(c="down"),b.detail<0&&(c="up")),e="up"==c?d.config.delta:-d.config.delta,d.scrollBarY.contentTop+=e*d.scrollBarY.ratio,d.scrollBarY.draggerTop-=e,"up"==c?d.updatePosition("up"):"down"==c&&d.updatePosition("down")},b.prototype.updatePosition=function(a,b){var c=this;"up"==a||"down"==a?(Math.abs(c.scrollBarY.contentTop)>c.contentBox.height()-c.scrollBox.height()&&(c.scrollBarY.contentTop=c.scrollBox.height()-c.contentBox.height(),c.scrollBarY.draggerTop=c.scrollBox.height()-c.scrollBarY.dragger.height()),c.scrollBarY.contentTop>0&&(c.scrollBarY.contentTop=0,c.scrollBarY.draggerTop=0),c.contentBox.is(":animated")?(c.toggleWindowScrollEvent(!0),c.contentBox.stop(!0,!1),c.scrollBarY.dragger.stop(!0,!1)):Math.abs(parseInt(c.contentBox.css("top")))==c.contentBox.height()-c.scrollBox.height()&&"down"==a?c.toggleWindowScrollEvent(!1):0==parseInt(c.contentBox.css("top"))&&"up"==a?c.toggleWindowScrollEvent(!1):c.toggleWindowScrollEvent(!0),c.contentBox.animate({top:c.scrollBarY.contentTop},600,"swing"),b?c.scrollBarY.dragger.css("top",c.scrollBarY.draggerTop):c.scrollBarY.dragger.animate({top:c.scrollBarY.draggerTop},600,"swing")):("left"==a||"right"==a)&&(Math.abs(c.scrollBarX.contentLeft)>c.contentBox.width()-c.scrollBox.width()&&(c.scrollBarX.contentLeft=c.scrollBox.width()-c.contentBox.width(),c.scrollBarX.draggerLeft=c.scrollBox.width()-c.scrollBarX.dragger.width()),c.scrollBarX.contentLeft>0&&(c.scrollBarX.contentLeft=0,c.scrollBarX.draggerLeft=0),c.contentBox.is(":animated")?(c.toggleWindowScrollEvent(!0),c.contentBox.stop(!0,!1),c.scrollBarX.dragger.stop(!0,!1)):Math.abs(parseInt(c.contentBox.css("left")))==c.contentBox.width()-c.scrollBox.width()&&"right"==a?c.toggleWindowScrollEvent(!1):0==parseInt(c.contentBox.css("left"))&&"left"==a?c.toggleWindowScrollEvent(!1):c.toggleWindowScrollEvent(!0),c.contentBox.animate({left:c.scrollBarX.contentLeft},600,"swing"),b?c.scrollBarX.dragger.css("left",c.scrollBarX.draggerLeft):c.scrollBarX.dragger.animate({left:c.scrollBarX.draggerLeft},600,"swing"))},b.prototype.allowUserSelect=function(){var c=b.browserName;"Firefox"==c?a("html").css("-moz-user-select","-moz-all"):a(document).off("selectstart")},b.prototype.forbidUserSelect=function(){var c=b.browserName;"Firefox"==c?a("html").css("-moz-user-select","none"):a(document).on("selectstart",function(){return!1})},b.prototype.update=function(a){return this.config.backgroundColor=a.backgroundColor,this.config.railColor=a.railColor,this.config.draggerColor=a.draggerColor,this.config.barWidth=a.barWidth,this.setBarStyle(),this},b.prototype.setBarStyle=function(){var a=this.config;this.scrollBarX.bar.css({height:a.barWidth,borderRadius:a.barWidth,backgroundColor:a.railColor}),this.scrollBarX.dragger.css({height:a.barWidth,backgroundColor:a.draggerColor,borderTop:"1px solid "+a.railColor,borderBottom:"1px solid "+a.railColor,borderRadius:a.barWidth}),this.scrollBarY.bar.css({width:a.barWidth,borderRadius:a.barWidth,backgroundColor:a.railColor}),this.scrollBarY.dragger.css({width:a.barWidth,borderRight:"1px solid "+a.railColor,borderLeft:"1px solid "+a.railColor,backgroundColor:a.draggerColor,borderRadius:a.barWidth})},b.prototype.destroy=function(a){},a.fn.extend({lorinScroller:function(){0!=arguments.length||this[0].scrollerObj||(this[0].scrollerObj=new b(this,arguments[0])),"update"==arguments[0]||"destroy"==arguments[0]?this[0].scrollerObj&&this[0].scrollerObj[arguments[0]](arguments[1]):this[0].scrollerObj||(this[0].scrollerObj=new b(this,arguments[0]))}}),a(function(a){a(".lorin-scroll").each(function(b,c){a(c).lorinScroller({barWidth:10})})})}(jQuery);